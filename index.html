<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Magical Blooming Garden</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;padding:0;width:100%;height:100%;
  overflow:hidden;background:#020409;
  font-family:Segoe UI,sans-serif;
}
#ui{
  position:absolute;top:6%;left:0;right:0;
  text-align:center;z-index:10;
}
#box{
  display:inline-block;
  padding:16px 24px;
  background:rgba(30,30,30,.75);
  color:#fff;border-radius:16px;
  font-size:1.1rem;
}
#next{
  margin-top:18px;
  padding:12px 30px;
  border:none;border-radius:30px;
  background:linear-gradient(135deg,#ff7eb3,#ff4f87);
  color:#fff;font-size:1rem;
  font-weight:700;cursor:pointer;
}
canvas{position:absolute;inset:0;}
</style>
</head>

<body>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_aa87f7c54c.mp3" type="audio/mpeg">
</audio>

<div id="ui">
  <div id="box"></div><br>
  <button id="next">NEXT</button>
</div>

<canvas id="c"></canvas>

<script>
/* ================= MUSIC ================= */
const music=document.getElementById("music");
music.volume=0.25;
let musicStarted=false;
addEventListener("pointerdown",()=>{
  if(!musicStarted){
    music.play().catch(()=>{});
    musicStarted=true;
  }
},{once:true});

/* ================= WISHES ================= */
const wishes=[
  "Happy New Year raa boku",
  
];

let wi=0;
const box=document.getElementById("box");
const btn=document.getElementById("next");

function typeText(t){
  box.textContent="";
  let i=0;
  const tm=setInterval(()=>{
    box.textContent+=t[i++];
    if(i>=t.length) clearInterval(tm);
  },35);
}

typeText(wishes[wi++]);

btn.onclick=()=>{
  if(wi<wishes.length) typeText(wishes[wi++]);
  else btn.style.display="none";
};

/* ================= CANVAS ================= */
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();addEventListener("resize",resize);

/* ================= GLOBAL ================= */
let wind=0;
const groundY=()=>canvas.height*0.92;

/* ================= MOON ================= */
function drawMoon(){
  ctx.save();
  ctx.translate(canvas.width*0.8,canvas.height*0.18);
  ctx.fillStyle="#eaeaea";
  ctx.shadowBlur=40;
  ctx.shadowColor="#fff";
  ctx.beginPath();
  ctx.arc(0,0,45,0,Math.PI*2);
  ctx.fill();
  ctx.restore();
}

/* ================= FOG ================= */
const fog=[];
for(let i=0;i<6;i++){
  fog.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height*0.5,s:300+Math.random()*300});
}
function drawFog(){
  ctx.fillStyle="rgba(255,255,255,0.03)";
  fog.forEach(f=>{
    f.x+=0.15;
    if(f.x-f.s>canvas.width) f.x=-f.s;
    ctx.beginPath();
    ctx.ellipse(f.x,f.y,f.s,f.s*0.4,0,0,Math.PI*2);
    ctx.fill();
  });
}

/* ================= FIREFLIES ================= */
const fireflies=[];
for(let i=0;i<22;i++){
  fireflies.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height*0.6,a:Math.random()*Math.PI*2});
}
function drawFireflies(){
  fireflies.forEach(f=>{
    f.a+=0.02;
    f.x+=Math.cos(f.a)*0.5;
    f.y+=Math.sin(f.a*1.3)*0.4;
    ctx.fillStyle="rgba(255,255,180,0.8)";
    ctx.shadowBlur=12;
    ctx.shadowColor="#fff8a0";
    ctx.beginPath();
    ctx.arc(f.x,f.y,2.2,0,Math.PI*2);
    ctx.fill();
  });
}

/* ================= GRASS ================= */
const grass=[];
for(let i=0;i<260;i++){
  grass.push({
    x:Math.random()*canvas.width,
    h:18+Math.random()*36,
    p:Math.random()*Math.PI*2
  });
}
function drawGrass(){
  ctx.strokeStyle="#2e7d32";
  ctx.lineWidth=1.2;
  grass.forEach(g=>{
    ctx.beginPath();
    ctx.moveTo(g.x,groundY());
    ctx.lineTo(g.x+Math.sin(g.p+wind)*12,groundY()-g.h);
    ctx.stroke();
  });
}

/* ================= FLOWERS ================= */
const flowers=[];
const colors=["#ffb7c5","#f672b0","#c77dff","#ffd166","#9bf6ff"];

function createPlant(x){
  const leafCount=4+Math.floor(Math.random()*3);
  const leaves=[];
  for(let j=0;j<leafCount;j++){
    leaves.push({
      pos:0.25+Math.random()*0.5,
      angle:(Math.random()*1.6) * (Math.random()<0.5 ? -1 : 1),
      size:4+Math.random()*5,
      flower:Math.random()<0.55
    });
  }
  flowers.push({
    x,
    stem:110+Math.random()*120,
    grow:0,
    growSpeed:0.006+Math.random()*0.004,
    sway:Math.random()*Math.PI*2,
    size:14+Math.random()*18,
    color:colors[Math.floor(Math.random()*colors.length)],
    leaves
  });
}

/* initial plants */
for(let i=1;i<=14;i++){
  createPlant(i*canvas.width/15);
}

/* ================= PETALS ================= */
const petals=[];
function spawnPetal(x,y,color){
  petals.push({
    x,y,
    vx:(Math.random()-.5)*0.6,
    vy:1+Math.random(),
    r:Math.random()*Math.PI,
    s:4+Math.random()*3,
    c:color
  });
}
function drawPetals(){
  petals.forEach((p,i)=>{
    p.x+=p.vx;p.y+=p.vy;p.r+=0.02;
    ctx.save();
    ctx.translate(p.x,p.y);
    ctx.rotate(p.r);
    ctx.fillStyle=p.c;
    ctx.beginPath();
    ctx.ellipse(0,0,p.s,p.s*0.6,0,0,Math.PI*2);
    ctx.fill();
    ctx.restore();
    if(p.y>canvas.height) petals.splice(i,1);
  });
}

/* ================= PLANT ================= */
function drawPlant(f){
  ctx.save();
  ctx.translate(f.x,groundY());

  f.grow=Math.min(1,f.grow+f.growSpeed);
  f.sway+=0.01;

  // stem
  ctx.strokeStyle="#3fa34d";
  ctx.lineWidth=4;
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.lineTo(Math.sin(f.sway+wind)*12,-f.stem*f.grow);
  ctx.stroke();

  // leaves
  f.leaves.forEach(l=>{
    const y=-f.stem*l.pos*f.grow;
    ctx.save();
    ctx.translate(Math.sin(f.sway+wind)*12,y);
    ctx.rotate(l.angle+Math.sin(wind+f.sway)*0.35);
    ctx.fillStyle="#4fd16a";
    ctx.beginPath();
    ctx.ellipse(0,0,l.size,l.size*2,0,0,Math.PI*2);
    ctx.fill();

    if(l.flower){
      ctx.fillStyle=f.color;
      ctx.beginPath();
      ctx.arc(0,-l.size*1.6,4,0,Math.PI*2);
      ctx.fill();
    }
    ctx.restore();
  });

  // flower head
  ctx.save();
  ctx.translate(Math.sin(f.sway+wind)*12,-f.stem*f.grow);
  ctx.shadowBlur=25;
  ctx.shadowColor=f.color;
  ctx.fillStyle=f.color;
  for(let i=0;i<5;i++){
    ctx.rotate(Math.PI*2/5);
    ctx.beginPath();
    ctx.ellipse(0,-f.size*0.3,f.size*0.5,f.size*0.7,0,0,Math.PI*2);
    ctx.fill();
  }
  if(Math.random()<0.02)
    spawnPetal(f.x,groundY()-f.stem*f.grow,f.color);
  ctx.restore();

  ctx.restore();
}

/* ================= TAP ACTION ================= */
canvas.addEventListener("pointerdown",e=>{
  const r=canvas.getBoundingClientRect();
  const x=e.clientX-r.left;
  const y=e.clientY-r.top;

  if(y>groundY()-40){
    createPlant(x);
  }else{
    flowers.forEach(f=>{
      if(Math.abs(f.x-x)<40) f.grow=0;
    });
  }
});

/* ================= ANIMATION ================= */
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawMoon();
  drawFog();
  drawFireflies();
  drawGrass();

  wind+=0.002;

  flowers.forEach(f=>drawPlant(f));
  drawPetals();

  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>